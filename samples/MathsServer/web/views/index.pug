doctype html
html
	head
		title= locals.Server.Config.Settings.AppInfo.name

		meta( name="viewport" content="width=device-width, initial-scale=1" )

		//- Fonts
		//- link( rel='stylesheet' href='https://fonts.googleapis.com/css?family=Righteous|Roboto' )
		link( rel='stylesheet' href='https://fonts.googleapis.com/css?family=Ubuntu' )
		link( rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css' )

		//- link(rel='shortcut icon' href='//cdn2.auth0.com/styleguide/latest/lib/logos/img/favicon.png')

		//- JQuery
		script( type='text/javascript' src='https://code.jquery.com/jquery-3.5.1.min.js' )

		//- AngularJS
		script( type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js' )
		script( type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-cookies.js' )
		script( type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-resource.js' )
		script( type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-sanitize.js' )
		script( type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-touch.js' )

		//- CSS/Framework
		link( rel='stylesheet' href='https://www.w3schools.com/w3css/4/w3.css' )
		script( type='text/javascript' src='https://www.w3schools.com/lib/w3codecolor.js' )

		//- Moment
		script( type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js' )

		//- socket.io
		script( src="https://cdn.socket.io/4.5.0/socket.io.min.js" integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k" crossorigin="anonymous" )
		script( src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js" )

		//- Server APIs
		script( type='text/javascript' src='/_express-api-client.js' )
		script( type='text/javascript' src='/_socket-api-client.js' )

		//- Application Source
		script( type='text/javascript' src='/app.js' )
		link( rel='stylesheet' href='/application.css' )


body

	div( ng-app='Application_Module', ng-cloak )

		nav.w3-bar.w3-border.w3-light-grey( role="navigation" )
			img.w3-bar-item.w3-image.w3-responsive.w3-opacity( src='/images/logo-24x24.png' )
			.w3-bar-item.w3-text-grey= locals.Server.Config.Settings.AppInfo.name
			a.w3-bar-item.w3-button.w3-mobile( href="/" ) Home

			-var is_logged_in = ( locals.User && locals.User.user_role && ['admin','super','user'].includes( locals.User.user_role ) )
			if( is_logged_in )

				if ( locals.User.user_role === 'admin' ) || ( locals.User.user_role === 'super' )
					//- a.w3-bar-item.w3-button.w3-mobile( href="/explorer" ) Server Explorer
					a.w3-bar-item.w3-button.w3-mobile( href="/SystemUsers/List" ) Server Accounts

				.w3-dropdown-hover.w3-right.w3-mobile

					button.w3-button
						if( locals.User.image_url )
							img.w3-round( src=`${locals.User.image_url}` style='width:24px; height:24px' )
						span.w3-margin= locals.User.user_name
						i.fa.fa-caret-down

					.w3-dropdown-content.w3-bar-block.w3-dark-grey

						if ( locals.User.user_role === 'admin' ) || ( locals.User.user_role === 'super' ) || ( locals.User.user_role === 'user' )
							.w3-border-bottom.w3-border-top
								a.w3-bar-item.w3-button.w3-mobile( href="/SystemUsers/Item?ItemID=" + locals.User.__.id + "&PageOp=Update" ) My Account
								a.w3-bar-item.w3-button.w3-mobile( href="/auth/logout" ) Log Out

						if ( locals.User.user_role === 'admin' ) || ( locals.User.user_role === 'super' )
							.w3-border-bottom.w3-border-top
								a.w3-bar-item.w3-button.w3-mobile( href="/Explorer" ) Server Explorer
								a.w3-bar-item.w3-button.w3-mobile( href="/SystemUsers/List" ) Server Accounts

			else

				a.w3-bar-item.w3-button.w3-mobile( href="/auth/signup" ) Sign Up
				a.w3-bar-item.w3-button.w3-mobile( href="/auth/login" ) Log In

		block content
